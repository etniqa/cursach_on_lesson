<div *ngIf="isLoadedForm; else loadingBlock">
  <form
    class="card"
    [formGroup]="form"
    (ngSubmit)="search()"
  >
    <div class="form-control">
      <label for="organization">Firstly choose organization: </label>
      <select id="organization" class="custom-select" formControlName="organization" (change)="changeOrg($event.target.value)">
        <option *ngFor="let org of organizations" [value]="org.id">{{org.name}}</option>
      </select>
    </div>
    <div class="form-control">
      <label for="contract">Contract in organization: </label>
      <select (change)="changeContract($event.target.value)" id="contract" class="custom-select" formControlName="contract">
        <option *ngFor="let contract of contracts" [value]="contract.id">{{contract.name}}</option>
      </select>
    </div>
    <input
      class="btn btn-primary"
      type="submit"
      [disabled]="form.invalid"
    >
  </form>
</div>

<div *ngIf="isLoadedResp === true; else loadingBlockForResp">
  <table>
    <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Creation</th>
      <th>Modified</th>
      <th>Date beginning</th>
      <th>Date ending</th>
      <th>Cost</th>
      <th>Chief</th>
      <th>Organization which sign</th>
      <th>Delete</th>
      <th>Edit</th>
    </tr>
    </thead>
    <tbody>
    <tr
      *ngFor="let proj of projectsForContract; let ind = index"
    >
      <td>{{proj.fullName}}</td>
      <td>{{proj.description}}</td>
      <td>{{proj.creationDate | date:'short'}}</td>
      <td>{{proj.dateModified! | date:'short'}}</td>
      <td>{{proj.dateBeg! | date:'short'}}</td>
      <td>{{proj.dateEnd! | date:'short'}}</td>
      <td>{{proj.cost}}</td>
      <td></td>
      <td>{{proj.organizationWhichSign!.name}}</td>
      <td><button (click)="delete(proj)" class="btn btn-minor">Delete</button></td>
      <td><button [routerLink]="['/admin', 'agreement', 'edit', proj.id]" class="btn btn-minor">Edit</button></td>
    </tr>
    </tbody>
  </table>
  <hr>
  <button [ngStyle]="{marginTop: '10px'}" [routerLink]="['/admin', 'agreement', 'edit', 'create'.toString()]" class="btn btn-primary">Create</button>
</div>


<ng-template #loadingBlock>
  <p class="text-center">Loading...</p>
</ng-template>

<ng-template #loadingBlockForResp>
  <p *ngIf="isLoadedResp === false" class="text-center">Loading...</p>
</ng-template>
